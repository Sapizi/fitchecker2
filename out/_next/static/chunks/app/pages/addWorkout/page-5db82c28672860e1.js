(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{2488:(n,e,t)=>{"use strict";t.d(e,{N:()=>a});var i=t(851);let r="https://kivipufwogqabxoerpmi.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpdmlwdWZ3b2dxYWJ4b2VycG1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNTE4MjQsImV4cCI6MjA1ODkyNzgyNH0.jn2hFYd8_AcoYqA6uTO91dAlRt4Q-x0BpYE8vR2q66A";if(!r||!o)throw Error("Supabase URL and Anon Key must be provided in environment variables");let a=(0,i.UU)(r,o)},4317:(n,e,t)=>{"use strict";t.d(e,{M3:()=>g,MG:()=>m,SG:()=>k,aP:()=>h,bW:()=>z,cX:()=>f,cc:()=>b,sR:()=>y,ss:()=>w});var i=t(5933),r=t(4987);function o(){let n=(0,i._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%; \n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    padding: 0 10px; \n  }\n"]);return o=function(){return n},n}function a(){let n=(0,i._)(["\n  width: 500px;\n  max-width: 90%; \n  margin: 50px auto;\n  padding: 20px;\n  border: 2px solid #000;\n  border-radius: 10px;\n  background-color: #f9f9f9;\n  margin-top: 5%;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    margin: 20px auto; \n    padding: 15px; \n    margin-top: 3%; \n    gap: 8px; \n  }\n\n  @media (max-width: 480px) {\n    padding: 10px;\n  }\n"]);return a=function(){return n},n}function d(){let n=(0,i._)(["\n  width: 100%; \n  height: 40px;\n  padding-left: 10px;\n  border: none;\n  font-size: 16px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    height: 36px;\n    font-size: 14px; \n    padding-left: 8px;\n  }\n\n  @media (max-width: 480px) {\n    height: 32px;\n    font-size: 13px;\n  }\n"]);return d=function(){return n},n}function x(){let n=(0,i._)(["\n  font-size: 16px;\n  margin-top: 20px;\n  padding: 10px 20px;\n  background-color: #e97c00;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  width: 100%; \n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    margin-top: 15px;\n    padding: 8px 15px;\n    font-size: 14px;\n  }\n\n  @media (max-width: 480px) {\n    padding: 7px 10px;\n    font-size: 13px;\n  }\n"]);return x=function(){return n},n}function l(){let n=(0,i._)(["\n  width: 100%;\n  height: 40px;\n  margin-top: 10px;\n  font-size: 16px;\n  border: none;\n  border-radius: 5px;\n  padding-left: 10px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    height: 36px;\n    font-size: 14px;\n    margin-top: 8px;\n    padding-left: 8px;\n  }\n\n  @media (max-width: 480px) {\n    height: 32px;\n    font-size: 13px;\n  }\n"]);return l=function(){return n},n}function p(){let n=(0,i._)(["\n  width: 90%;\n  max-height: 150px;\n  overflow-y: auto;\n  margin-top: 10px;\n  padding: 10px;\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 100%;\n    max-height: 120px; \n    padding: 8px;\n    margin-top: 8px;\n  }\n\n  @media (max-width: 480px) {\n    max-height: 100px;\n    padding: 6px;\n  }\n"]);return p=function(){return n},n}function s(){let n=(0,i._)(["\n  margin: 0 0 10px 0;\n  font-size: 16px;\n  font-weight: 500;\n\n  @media (max-width: 768px) {\n    font-size: 14px;\n    margin-bottom: 8px;\n  }\n\n  @media (max-width: 480px) {\n    font-size: 13px;\n  }\n"]);return s=function(){return n},n}function c(){let n=(0,i._)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 5px;\n\n  @media (max-width: 768px) {\n    margin-bottom: 4px;\n    font-size: 14px; \n  }\n\n  @media (max-width: 480px) {\n    font-size: 13px;\n  }\n"]);return c=function(){return n},n}function u(){let n=(0,i._)(["\n  margin-right: 10px;\n  width: 18px; \n  height: 18px;\n\n  @media (max-width: 768px) {\n    width: 16px;\n    height: 16px;\n    margin-right: 8px;\n  }\n\n  @media (max-width: 480px) {\n    width: 14px;\n    height: 14px;\n  }\n"]);return u=function(){return n},n}let m=r.Ay.div(o()),h=r.Ay.form(a()),f=r.Ay.input(d()),g=r.Ay.button(x()),w=r.Ay.select(l()),b=r.Ay.div(p()),y=r.Ay.h4(s()),k=r.Ay.label(c()),z=r.Ay.input(u())},5628:(n,e,t)=>{"use strict";t.d(e,{m:()=>d});var i=t(5933),r=t(4987);function o(){let n=(0,i._)(["\n    margin-left: 15%;\n    margin-top: 3%;\n    margin-right: 15%;\n"]);return o=function(){return n},n}function a(){let n=(0,i._)(["\n  @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap');\n\n  * {\n    margin: 0;\n    padding: 0;\n    font-family: 'Comfortaa', sans-serif;\n  }\n"]);return a=function(){return n},n}let d=r.Ay.div(o());(0,r.DU)(a())},6453:(n,e,t)=>{Promise.resolve().then(t.bind(t,8954))},8032:(n,e,t)=>{"use strict";t.d(e,{A:()=>m});var i=t(5155),r=t(5933),o=t(4987);function a(){let n=(0,r._)(["\n    background-color: #E97C00;\n    width: 100%;\n    height: 10vh;\n    display: flex;\n    align-items: center;\n"]);return a=function(){return n},n}function d(){let n=(0,r._)(["\n    color: #fff;\n    font-size: 64px;\n    font-weight: 500;\n    margin-left: 62px;\n"]);return d=function(){return n},n}function x(){let n=(0,r._)(["\n    padding: 0.5rem 1rem;\n    background-color: #e97c00;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1rem;\n    transition: background-color 0.3s;\n\n    &:hover {\n        background-color: #d16b00;\n    }\n"]);return x=function(){return n},n}let l=o.Ay.header(a()),p=o.Ay.h1(d()),s=o.Ay.button(x());var c=t(5695),u=t(2115);let m=()=>{let n=(0,c.useRouter)(),[e,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{let n="true"===localStorage.getItem("isAdminLoggedIn"),e="true"===localStorage.getItem("isClientLoggedIn");t(n||e)},[]),(0,i.jsxs)(l,{children:[(0,i.jsx)(p,{children:"FitChecker"}),e&&(0,i.jsx)(s,{onClick:()=>{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("isClientLoggedIn"),n.push("/")},children:"Выйти"})]})}},8954:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>f});var i=t(5155),r=t(2177),o=t(221),a=t(5594),d=t(8032),x=t(6874),l=t.n(x),p=t(4317),s=t(9960),c=t(5628),u=t(2115),m=t(2488);let h=a.Ik({workoutName:a.Yj().min(1,"Название обязательно"),workoutDateTime:a.Yj().min(1,"Дата и время обязательны"),trainerId:a.ai().min(1,"Выберите тренера"),searchQuery:a.Yj().optional(),clients:a.YO(a.ai()).optional()}),f=()=>{let{register:n,handleSubmit:e,formState:{errors:t,isSubmitting:a},setValue:x,watch:f,reset:g}=(0,r.mN)({resolver:(0,o.u)(h),defaultValues:{clients:[]}}),[w,b]=(0,u.useState)([]),[y,k]=(0,u.useState)([]),[z,_]=(0,u.useState)(null),[v,j]=(0,u.useState)(null),A=f();(0,u.useEffect)(()=>{(async()=>{try{let[{data:n,error:e},{data:t,error:i}]=await Promise.all([m.N.from("trainers").select("id, trainer_name"),m.N.from("clients").select("id, name")]);if(e)throw e;if(i)throw i;b(n||[]),k(t||[])}catch(n){console.error("Ошибка загрузки данных:",n),j("Ошибка загрузки данных. Пожалуйста, обновите страницу.")}})()},[]);let I=n=>{let e=A.clients||[];if(e.includes(n))x("clients",e.filter(e=>e!==n));else{if(e.length>=30){alert("Можно выбрать не более 30 клиентов.");return}x("clients",[...e,n])}},N=y.filter(n=>n.name.toLowerCase().includes((A.searchQuery||"").toLowerCase())),C=async n=>{try{let{data:e,error:t}=await m.N.from("workouts").insert({workout_name:n.workoutName,workout_datetime:n.workoutDateTime,trainer_id:n.trainerId}).select().single();if(t)throw t;if(n.clients&&n.clients.length>0&&e){let t=n.clients.map(n=>({workout_id:e.id,client_id:n})),{error:i}=await m.N.from("workout_clients").insert(t);if(i)throw i}_("Тренировка успешно добавлена!"),g(),j(null)}catch(n){console.error("Ошибка при добавлении тренировки:",n),j("Произошла ошибка при добавлении тренировки. Пожалуйста, попробуйте снова."),_(null)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{}),(0,i.jsxs)(c.m,{children:[(0,i.jsx)(l(),{href:"/pages/mainPage",children:"На главную"}),(0,i.jsx)(s.hE,{children:"Добавить занятие"}),(0,i.jsx)(p.MG,{children:(0,i.jsxs)(p.aP,{onSubmit:e(C),children:[v&&(0,i.jsx)("div",{style:{color:"red"},children:v}),z&&(0,i.jsx)("div",{style:{color:"green"},children:z}),(0,i.jsx)(p.cX,{type:"text",placeholder:"Название занятия",...n("workoutName"),"aria-invalid":t.workoutName?"true":"false"}),t.workoutName&&(0,i.jsx)("span",{style:{color:"red"},children:t.workoutName.message}),(0,i.jsx)(p.cX,{type:"datetime-local",placeholder:"Дата и время",...n("workoutDateTime"),"aria-invalid":t.workoutDateTime?"true":"false"}),t.workoutDateTime&&(0,i.jsx)("span",{style:{color:"red"},children:t.workoutDateTime.message}),(0,i.jsxs)(p.ss,{...n("trainerId",{valueAsNumber:!0}),"aria-invalid":t.trainerId?"true":"false",children:[(0,i.jsx)("option",{value:"",children:"Выберите тренера"}),w.map(n=>(0,i.jsx)("option",{value:n.id,children:n.trainer_name},n.id))]}),t.trainerId&&(0,i.jsx)("span",{style:{color:"red"},children:t.trainerId.message}),(0,i.jsx)(p.cX,{type:"text",placeholder:"Поиск клиентов по ФИО",...n("searchQuery")}),(0,i.jsxs)(p.cc,{children:[(0,i.jsx)(p.sR,{children:"Выберите клиентов: (максимум 30)"}),N.length>0?N.map(n=>(0,i.jsxs)(p.SG,{children:[(0,i.jsx)(p.bW,{type:"checkbox",checked:(A.clients||[]).includes(n.id),onChange:()=>I(n.id)}),n.name]},n.id)):(0,i.jsx)("p",{children:"Клиенты не найдены"})]}),(0,i.jsx)(p.M3,{type:"submit",disabled:a,children:a?"Добавление...":"Добавить тренировку"})]})})]})]})}},9960:(n,e,t)=>{"use strict";t.d(e,{$v:()=>_,DF:()=>g,Z0:()=>b,an:()=>y,c5:()=>k,hE:()=>w,rk:()=>z,xl:()=>j,z9:()=>A,zA:()=>v});var i=t(5933),r=t(6874),o=t.n(r),a=t(4987);function d(){let n=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  gap: 20px;\n  flex-wrap: wrap; \n\n  @media (max-width: 768px) {\n    flex-direction: column; \n    align-items: center;\n    gap: 15px;\n  }\n"]);return d=function(){return n},n}function x(){let n=(0,i._)(["\n  font-size: 46px;\n\n  @media (max-width: 768px) {\n    font-size: 32px; \n    text-align: center;\n  }\n"]);return x=function(){return n},n}function l(){let n=(0,i._)(["\n  width: 460px;\n  height: 626px;\n  border: 2px solid black;\n  border-radius: 10px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%; \n    max-width: 400px;\n    height: auto; \n    padding: 20px; \n  }\n"]);return l=function(){return n},n}function p(){let n=(0,i._)(["\n  font-size: 300px;\n  margin-left: 36px;\n  display: block; \n\n  @media (max-width: 768px) {\n    font-size: 150px; \n    margin-left: 0;\n    text-align: center;\n  }\n"]);return p=function(){return n},n}function s(){let n=(0,i._)(["\n  margin-top: 110px;\n  font-size: 28px;\n  margin-left: 36px;\n\n  @media (max-width: 768px) {\n    margin-top: 20px; \n    font-size: 24px;\n    margin-left: 0;\n    text-align: center;\n  }\n"]);return s=function(){return n},n}function c(){let n=(0,i._)(["\n  display: block;\n  text-align: center;\n  margin-left: 33px;\n  width: 384px;\n  height: 100px;\n  background-color: #e97c00;\n  align-content: center;\n  border-radius: 10px;\n  color: white;\n  font-size: 36px;\n  text-decoration: none;\n  margin-top: 26px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%; \n    max-width: 350px;\n    height: 80px; \n    margin-left: auto;\n    margin-right: auto;\n    font-size: 24px;\n  }\n"]);return c=function(){return n},n}function u(){let n=(0,i._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 400px;\n  }\n"]);return u=function(){return n},n}function m(){let n=(0,i._)(["\n  font-size: 20px;\n  color: black;\n  margin: 5px 0;\n\n  @media (max-width: 768px) {\n    font-size: 18px;\n  }\n"]);return m=function(){return n},n}function h(){let n=(0,i._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 400px;\n    align-items: center;\n    gap: 15px;\n  }\n"]);return h=function(){return n},n}function f(){let n=(0,i._)(["\n  display: block;\n  text-align: center;\n  margin-left: 33px;\n  width: 384px;\n  height: 165px;\n  background-color: #e97c00;\n  align-content: center;\n  border-radius: 10px;\n  color: white;\n  font-size: 28px;\n  text-decoration: none;\n  margin-top: 26px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 350px;\n    height: 100px; \n    margin-left: auto;\n    margin-right: auto;\n    font-size: 24px;\n    margin-top: 0;\n  }\n"]);return f=function(){return n},n}let g=a.Ay.div(d()),w=a.Ay.h1(x()),b=a.Ay.div(l()),y=a.Ay.span(p()),k=a.Ay.p(s()),z=(0,a.Ay)(o())(c()),_=a.Ay.div(u()),v=a.Ay.p(m()),j=a.Ay.div(h()),A=(0,a.Ay)(o())(f())}},n=>{var e=e=>n(n.s=e);n.O(0,[825,851,874,558,342,441,684,358],()=>e(6453)),_N_E=n.O()}]);