(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{2488:(n,e,t)=>{"use strict";t.d(e,{N:()=>a});var i=t(851);let r="https://kivipufwogqabxoerpmi.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpdmlwdWZ3b2dxYWJ4b2VycG1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNTE4MjQsImV4cCI6MjA1ODkyNzgyNH0.jn2hFYd8_AcoYqA6uTO91dAlRt4Q-x0BpYE8vR2q66A";if(!r||!o)throw Error("Supabase URL and Anon Key must be provided in environment variables");let a=(0,i.UU)(r,o)},5055:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>Z});var i=t(5155),r=t(2115),o=t(2177),a=t(8032),d=t(2488),x=t(5933),l=t(4987);function c(){let n=(0,x._)(["\n  list-style: none;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  width: 100%; \n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    gap: 10px; \n  }\n"]);return c=function(){return n},n}function s(){let n=(0,x._)(["\n  border: 2px solid #000;\n  border-radius: 10px;\n  padding: 15px;\n  background-color: #f9f9f9;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    flex-direction: column; \n    align-items: flex-start;\n    padding: 10px;\n    gap: 10px; \n  }\n"]);return s=function(){return n},n}function p(){let n=(0,x._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  width: 100%; \n  @media (max-width: 768px) {\n    gap: 4px;\n  }\n"]);return p=function(){return n},n}function u(){let n=(0,x._)(["\n  font-size: 18px;\n  margin: 0;\n\n  @media (max-width: 768px) {\n    font-size: 16px; \n  }\n\n  @media (max-width: 480px) {\n    font-size: 14px;\n  }\n"]);return u=function(){return n},n}function m(){let n=(0,x._)(["\n  font-size: 24px;\n  text-align: center;\n  color: #666;\n\n  @media (max-width: 768px) {\n    font-size: 20px; \n  }\n  @media (max-width: 480px) {\n    font-size: 18px;\n  }\n"]);return m=function(){return n},n}function f(){let n=(0,x._)(["\n  font-size: 18px;\n  text-align: center;\n  color: red;\n\n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n\n  @media (max-width: 480px) {\n    font-size: 14px;\n  }\n"]);return f=function(){return n},n}function h(){let n=(0,x._)(["\n  width: 70%;\n  padding: 8px 16px;\n  margin-left: 10px;\n  background-color: #e97c00;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px; \n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    padding: 7px 12px;\n    margin-left: 0; \n    font-size: 14px;\n    width: 100%; \n  }\n\n  @media (max-width: 480px) {\n    padding: 6px 10px;\n    font-size: 13px;\n  }\n"]);return h=function(){return n},n}function g(){let n=(0,x._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  width: 100%;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    gap: 8px;\n  }\n"]);return g=function(){return n},n}function b(){let n=(0,x._)(["\n  padding: 8px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  width: 100%;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    padding: 7px;\n    font-size: 14px;\n  }\n\n  @media (max-width: 480px) {\n    padding: 6px;\n    font-size: 13px;\n  }\n"]);return b=function(){return n},n}function w(){let n=(0,x._)(["\n  padding: 8px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  width: 100%;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    padding: 7px;\n    font-size: 14px;\n  }\n\n  @media (max-width: 480px) {\n    padding: 6px;\n    font-size: 13px;\n  }\n"]);return w=function(){return n},n}function y(){let n=(0,x._)(["\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end; \n\n  @media (max-width: 768px) {\n    flex-direction: column; \n    align-items: stretch; \n    gap: 8px;\n  }\n"]);return y=function(){return n},n}function j(){let n=(0,x._)(["\n  display: flex;\n  gap: 10px;\n"]);return j=function(){return n},n}function z(){let n=(0,x._)(["\n  background-color: #ff4d4d;\n  width: 70%;\n  &:hover {\n    background-color: #e60000;\n  }\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]);return z=function(){return n},n}let A=l.Ay.ul(c()),_=l.Ay.li(s()),v=l.Ay.div(p()),k=l.Ay.p(u()),I=l.Ay.p(m()),S=l.Ay.p(f()),N=l.Ay.button(h()),C=l.Ay.form(g()),E=l.Ay.input(b()),q=l.Ay.select(w()),J=l.Ay.div(y()),F=l.Ay.div(j()),L=(0,l.Ay)(N)(z());var O=t(5628),R=t(9960),Y=t(6874),U=t.n(Y);let Z=()=>{let[n,e]=(0,r.useState)([]),[t,x]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[s,p]=(0,r.useState)(null),{register:u,handleSubmit:m,reset:f,formState:{errors:h}}=(0,o.mN)({defaultValues:{name:"",sex:"male",age:0,subscription:"monthly"}});(0,r.useEffect)(()=>{(async()=>{try{x(!0);let{data:n,error:t}=await d.N.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;e(n)}catch(n){c("Ошибка при загрузке клиентов: ".concat(n.message))}finally{x(!1)}})()},[]);let g=n=>{p(n.id),f({name:n.name,sex:n.sex,age:n.age,subscription:n.subscription})},b=async n=>{let t=parseInt(String(n.age),10);if(isNaN(t)||t<=0){c("Возраст должен быть положительным числом.");return}try{let{error:i}=await d.N.from("clients").update({name:n.name,sex:n.sex,age:t,subscription:n.subscription}).eq("id",s);if(i)throw i;e(e=>e.map(e=>e.id===s?{...e,...n,age:t}:e)),p(null),f()}catch(n){c("Ошибка при обновлении клиента: ".concat(n.message))}},w=()=>{p(null),f()},y=async n=>{if(confirm("Вы уверены, что хотите удалить этого клиента?"))try{let{error:t}=await d.N.from("clients").delete().eq("id",n);if(t)throw t;e(e=>e.filter(e=>e.id!==n))}catch(n){c("Ошибка при удалении клиента: ".concat(n.message))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{}),(0,i.jsxs)(O.m,{children:[(0,i.jsx)(U(),{href:"/pages/mainPage",children:"На главную"}),(0,i.jsx)(R.hE,{children:"Список клиентов"}),t&&(0,i.jsx)(I,{children:"Загрузка..."}),l&&(0,i.jsx)(S,{children:l}),!t&&!l&&(0,i.jsx)(A,{children:0===n.length?(0,i.jsx)(k,{children:"Клиентов пока нет."}):n.map(n=>(0,i.jsx)(_,{children:s===n.id?(0,i.jsxs)(C,{onSubmit:m(b),children:[(0,i.jsx)(E,{...u("name",{required:"ФИО обязательно"}),placeholder:"ФИО"}),h.name&&(0,i.jsx)(S,{children:h.name.message}),(0,i.jsxs)(q,{...u("sex"),children:[(0,i.jsx)("option",{value:"male",children:"Мужской"}),(0,i.jsx)("option",{value:"female",children:"Женский"})]}),(0,i.jsx)(E,{type:"number",...u("age",{required:"Возраст обязателен",min:{value:1,message:"Возраст должен быть больше 0"}}),placeholder:"Возраст"}),h.age&&(0,i.jsx)(S,{children:h.age.message}),(0,i.jsxs)(q,{...u("subscription"),children:[(0,i.jsx)("option",{value:"monthly",children:"Месячный"}),(0,i.jsx)("option",{value:"quarterly",children:"Квартальный"}),(0,i.jsx)("option",{value:"yearly",children:"Годовой"})]}),(0,i.jsxs)(J,{children:[(0,i.jsx)(N,{type:"submit",children:"Сохранить"}),(0,i.jsx)(N,{type:"button",onClick:w,children:"Отмена"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(v,{children:[(0,i.jsxs)(k,{children:[(0,i.jsx)("strong",{children:"ФИО:"})," ",n.name]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("strong",{children:"Пол:"})," ","male"===n.sex?"Мужской":"Женский"]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("strong",{children:"Возраст:"})," ",n.age]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("strong",{children:"Абонемент:"}),"monthly"===n.subscription?"Месячный":"quarterly"===n.subscription?"Квартальный":"Годовой"]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("strong",{children:"Дата добавления:"})," ",new Date(n.created_at).toLocaleString("ru-RU")]})]}),(0,i.jsxs)(F,{children:[(0,i.jsx)(N,{onClick:()=>g(n),children:"Редактировать"}),(0,i.jsx)(L,{onClick:()=>y(n.id),children:"Удалить"})]})]})},n.id))})]})]})}},5628:(n,e,t)=>{"use strict";t.d(e,{m:()=>o});var i=t(5933);function r(){let n=(0,i._)(["\n    margin-left: 15%;\n    margin-top: 3%;\n    margin-right: 15%;\n"]);return r=function(){return n},n}let o=t(4987).Ay.div(r())},8032:(n,e,t)=>{"use strict";t.d(e,{A:()=>m});var i=t(5155),r=t(5933),o=t(4987);function a(){let n=(0,r._)(["\n    background-color: #E97C00;\n    width: 100%;\n    height: 10vh;\n    display: flex;\n    align-items: center;\n"]);return a=function(){return n},n}function d(){let n=(0,r._)(["\n    color: #fff;\n    font-size: 64px;\n    font-weight: 500;\n    margin-left: 62px;\n"]);return d=function(){return n},n}function x(){let n=(0,r._)(["\n    padding: 0.5rem 1rem;\n    background-color: #e97c00;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1rem;\n    transition: background-color 0.3s;\n\n    &:hover {\n        background-color: #d16b00;\n    }\n"]);return x=function(){return n},n}let l=o.Ay.header(a()),c=o.Ay.h1(d()),s=o.Ay.button(x());var p=t(5695),u=t(2115);let m=()=>{let n=(0,p.useRouter)(),[e,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{let n="true"===localStorage.getItem("isAdminLoggedIn"),e="true"===localStorage.getItem("isClientLoggedIn");t(n||e)},[]),(0,i.jsxs)(l,{children:[(0,i.jsx)(c,{children:"FitChecker"}),e&&(0,i.jsx)(s,{onClick:()=>{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("isClientLoggedIn"),n.push("/")},children:"Выйти"})]})}},9041:(n,e,t)=>{Promise.resolve().then(t.bind(t,5055))},9960:(n,e,t)=>{"use strict";t.d(e,{$v:()=>A,DF:()=>g,Z0:()=>w,an:()=>y,c5:()=>j,hE:()=>b,rk:()=>z,xl:()=>v,z9:()=>k,zA:()=>_});var i=t(5933),r=t(6874),o=t.n(r),a=t(4987);function d(){let n=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  gap: 20px;\n  flex-wrap: wrap; /* Добавлено, чтобы блоки переносились на новую строку на мобильных */\n\n  @media (max-width: 768px) {\n    flex-direction: column; /* Вертикальное расположение на мобильных */\n    align-items: center;\n    gap: 15px;\n  }\n"]);return d=function(){return n},n}function x(){let n=(0,i._)(["\n  font-size: 46px;\n\n  @media (max-width: 768px) {\n    font-size: 32px; /* Уменьшенный размер шрифта */\n    text-align: center;\n  }\n"]);return x=function(){return n},n}function l(){let n=(0,i._)(["\n  width: 460px;\n  height: 626px;\n  border: 2px solid black;\n  border-radius: 10px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%; /* Занимает почти всю ширину экрана */\n    max-width: 400px;\n    height: auto; /* Высота адаптируется под содержимое */\n    padding: 20px; /* Добавлен отступ для удобства */\n  }\n"]);return l=function(){return n},n}function c(){let n=(0,i._)(["\n  font-size: 300px;\n  margin-left: 36px;\n  display: block; /* Гарантирует правильное позиционирование */\n\n  @media (max-width: 768px) {\n    font-size: 150px; /* Уменьшенный размер для мобильных */\n    margin-left: 0;\n    text-align: center;\n  }\n"]);return c=function(){return n},n}function s(){let n=(0,i._)(["\n  margin-top: 110px;\n  font-size: 36px;\n  margin-left: 36px;\n\n  @media (max-width: 768px) {\n    margin-top: 20px; /* Уменьшен отступ */\n    font-size: 24px;\n    margin-left: 0;\n    text-align: center;\n  }\n"]);return s=function(){return n},n}function p(){let n=(0,i._)(["\n  display: block;\n  text-align: center;\n  margin-left: 33px;\n  width: 384px;\n  height: 121px;\n  background-color: #e97c00;\n  align-content: center;\n  border-radius: 10px;\n  color: white;\n  font-size: 36px;\n  text-decoration: none;\n  margin-top: 26px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%; /* Адаптивная ширина */\n    max-width: 350px;\n    height: 80px; /* Уменьшенная высота */\n    margin-left: auto;\n    margin-right: auto;\n    font-size: 24px;\n  }\n"]);return p=function(){return n},n}function u(){let n=(0,i._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 400px;\n  }\n"]);return u=function(){return n},n}function m(){let n=(0,i._)(["\n  font-size: 24px;\n  color: black;\n  margin: 5px 0;\n\n  @media (max-width: 768px) {\n    font-size: 18px;\n  }\n"]);return m=function(){return n},n}function f(){let n=(0,i._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 400px;\n    align-items: center;\n    gap: 15px;\n  }\n"]);return f=function(){return n},n}function h(){let n=(0,i._)(["\n  display: block;\n  text-align: center;\n  margin-left: 33px;\n  width: 384px;\n  height: 165px;\n  background-color: #e97c00;\n  align-content: center;\n  border-radius: 10px;\n  color: white;\n  font-size: 36px;\n  text-decoration: none;\n  margin-top: 26px;\n  box-sizing: border-box;\n\n  @media (max-width: 768px) {\n    width: 90%;\n    max-width: 350px;\n    height: 100px; /* Уменьшенная высота */\n    margin-left: auto;\n    margin-right: auto;\n    font-size: 24px;\n    margin-top: 0;\n  }\n"]);return h=function(){return n},n}let g=a.Ay.div(d()),b=a.Ay.h1(x()),w=a.Ay.div(l()),y=a.Ay.span(c()),j=a.Ay.p(s()),z=(0,a.Ay)(o())(p()),A=a.Ay.div(u()),_=a.Ay.p(m()),v=a.Ay.div(f()),k=(0,a.Ay)(o())(h())}},n=>{var e=e=>n(n.s=e);n.O(0,[825,851,874,558,441,684,358],()=>e(9041)),_N_E=n.O()}]);